# Matlab scripts
This part of the project has the goal to analyze the collected data, to estimate the TEG coefficients and finally to make comparison about the different models.

## Files
Main file for the analysis is **model_analysis.m**. Here the datasets are loaded one by one, to estimate the coefficients. The comparison is instead on **model_comparison.m**. The coefficients are exported in a **.mat** format.

## Collected data (logs)
These matlab scripts use csv files generated by the application. The folder is: __../data/__.  
For convention prepend the folder with teg_.

CSV files should be of two types: **open_circuit** and **1k_ohm_load**. The file names can be changed in matlab with `oc_file_name` and `cc_file_name` respectively.  
In the first file the column used are tempeatures and "teg_oc_voltage".
In the second file the columnn used are temperatures and "teg_current".

# Workflow
## Characterization of new model
First log the data in CSV, then place them in the correct [folder](#collected-data-logs).  

In model_analysis.m script the only modifications are in **Config** section:
- `models`: contains the folder name in "../data/".
- `selected_model`: index (of models array) of the model that should be characterized.

The modifications should be to add the new model in `models` array and to change the `selected_model` to point to the new one.

## New data of already existing model
Simply change `selected_model` value to match point to the model that should be characterized. Check that the data files have the correct name.

## Change of load resistor
The tests are made on a 1kOhm resistor, however it can be changed, this implies modifying the value of the variable `load_value` to the **exact** resistor value.  
Reistors have tolerances, so for this reason the value set in matlab should not be the nominal one, but instead the measured one (high accuracy multimeter is needed).

Consider using a different file name than the one described in [this section](#collected-data-logs);

# Model functions
The analytical models are matlab funtions located in **model_functions/**. Currently are:

1. $V_{open circuit} = Seebeck * \Delta T$
2. $R_{internal} = R_0 + R_1 * \bar{T}$
3. $I_{load} = \frac{V_{oc}}{R_{internal} + R_{load}}$

Steps on how to use these functions are described in the project report.
